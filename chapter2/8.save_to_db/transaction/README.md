# Транзакции
Транзакции в Spring выполняются при помощи AOP, конкретнее с помощью аннотации @Transactional, которая под капотом выполняется через аспект.<br>
Этот аспект создается автоматически.<br>

Фиксация транзакции - успешное выполнение.<br>
Откат транзакции - при возникновении исключения происходит откат к изначальным данным.<br>

Важно! Чтобы выполнился откат - исключение не должно быть перехвачено внутри метода обернутого @Transactional, иначе аспект никогда не узнает, что возникло исключение и применит фиксацию.<br>

@Transactional можно установить на метод, либо на класс.<br>
Если установить на класс, то все методы класса становятся транзакциями, что требует более внимательной работы с обработкой исключений (см. выше), для правильной работы отката/фиксации в аспекте.<br>

В качестве параметра для действия контроллера transferMoney() мы будем использовать объект типа TransferRequest, моделирующий тело HTTP-запроса. Подобные объекты, обязанность которых состоит в моделировании данных,
передаваемых между двумя приложениями, являются DTO.<br>

Account - модель бд.<br>
AccountRepository - описывает методы для доступа к бд.<br>
AccountRowMapper - превращает строки из бд в объект Account.<br>
TransferService - сервис, описывает способ передачи денег между Аккаунтами.<br>
TransferRequest - dto, моделирует передаваемые данные для TransferService.<br>
AccountController -  эндпоинт REST, точка входа для TransferService.<br>

Перевести деньги<br>
```bash
curl -XPOST -H "content-type:application/json" -d '{"senderAccountId":1, "receiverAccountId":2, "amount":100}' http://localhost:8080/transfer
```
Узнать баланс на аккаунтах<br>
```bash
curl http://localhost:8080/accounts
```